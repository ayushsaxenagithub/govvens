{% extends "base.html" %}
{% block title %}My Tickets - GOVVENS{% endblock %}

{% block content %}

<style>
    .ticket-card {
        transition: all 0.3s ease;
        border-left: 5px solid #28a745;
        position: relative;
        overflow: hidden;
    }
    
    .ticket-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 40px rgba(40, 167, 69, 0.4) !important;
    }
    
    .ticket-card.used {
        opacity: 0.8;
        border-left-color: #6c757d;
    }
    
    .ticket-card.upcoming {
        border-left-color: #ffc107;
    }
    
    .qr-code-section {
        background: white;
        padding: 15px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 180px;
    }
    
    .stat-card {
        background: linear-gradient(135deg, rgba(40, 167, 69, 0.1), rgba(32, 201, 151, 0.1));
        border: 2px solid #28a745;
        padding: 20px;
        border-radius: 10px;
        text-align: center;
    }
    
    .stat-value {
        font-size: 2rem;
        font-weight: bold;
        color: #28a745;
    }
    
    .stat-label {
        font-size: 0.9rem;
        color: #adb5bd;
        margin-top: 5px;
    }
    
    .timeline-item {
        padding: 15px;
        border-left: 3px solid #28a745;
        margin-bottom: 15px;
        background: rgba(40, 167, 69, 0.05);
        border-radius: 5px;
    }
    
    .timeline-status {
        font-size: 0.8rem;
        padding: 5px 10px;
        border-radius: 20px;
        display: inline-block;
    }
</style>

<!-- Page Header -->
<div class="bg-gradient text-white py-4 px-3 rounded-3 mb-4" style="background: linear-gradient(135deg, #28a745, #20c997);">
    <div class="row align-items-center">
        <div class="col-md-8">
            <h1 class="display-5 fw-bold mb-2">
                <i class="bi bi-ticket-perforated me-2"></i>My Booked Tickets
            </h1>
            <p class="lead mb-0">View and manage all your event tickets</p>
        </div>
        <div class="col-md-4 text-md-end">
            <a href="{% url 'events_list' %}" class="btn btn-light btn-lg">
                <i class="bi bi-calendar-event me-2"></i>Browse Events
            </a>
        </div>
    </div>
</div>

<!-- Quick Stats -->
<div class="row g-3 mb-5">
    <div class="col-md-3">
        <div class="stat-card">
            <i class="bi bi-ticket-perforated" style="font-size: 2rem; color: #28a745;"></i>
            <div class="stat-value">12</div>
            <div class="stat-label">Total Tickets</div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="stat-card">
            <i class="bi bi-calendar-check" style="font-size: 2rem; color: #28a745;"></i>
            <div class="stat-value">8</div>
            <div class="stat-label">Upcoming</div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="stat-card">
            <i class="bi bi-check-circle" style="font-size: 2rem; color: #28a745;"></i>
            <div class="stat-value">4</div>
            <div class="stat-label">Used</div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="stat-card">
            <i class="bi bi-currency-rupee" style="font-size: 2rem; color: #28a745;"></i>
            <div class="stat-value">₹18,500</div>
            <div class="stat-label">Total Spent</div>
        </div>
    </div>
</div>

<!-- Filter & Sort Section -->
<div class="card card-dark shadow-strong mb-4">
    <div class="card-body">
        <h5 class="card-title text-success mb-3">
            <i class="bi bi-funnel me-2"></i>Filter Tickets
        </h5>
        <div class="row g-3">
            <div class="col-md-4">
                <label class="form-label text-white">Status</label>
                <select class="form-select bg-dark text-white border-secondary">
                    <option>All Tickets</option>
                    <option>Upcoming</option>
                    <option>Used</option>
                    <option>Cancelled</option>
                </select>
            </div>
            <div class="col-md-4">
                <label class="form-label text-white">Sort By</label>
                <select class="form-select bg-dark text-white border-secondary">
                    <option>Date (Nearest First)</option>
                    <option>Date (Farthest First)</option>
                    <option>Price (Low to High)</option>
                    <option>Price (High to Low)</option>
                </select>
            </div>
            <div class="col-md-4">
                <label class="form-label text-white">Search Event</label>
                <input type="text" class="form-control bg-dark text-white border-secondary" placeholder="Enter event name...">
            </div>
        </div>
    </div>
</div>

<!-- Upcoming Tickets Section -->
<h3 class="text-success fw-bold mb-4">
    <i class="bi bi-calendar-check me-2"></i>Upcoming Events (8)
</h3>

<div class="row g-4 mb-5">
    <!-- Ticket 1: Upcoming -->
    <div class="col-md-6 col-lg-4">
        <div class="card bg-dark text-white border-0 shadow-lg ticket-card upcoming">
            <div class="card-header bg-warning bg-opacity-25">
                <div class="d-flex justify-content-between align-items-center">
                    <h5 class="card-title mb-0 text-warning fw-bold">India vs Pakistan</h5>
                    <span class="badge bg-warning text-dark">Upcoming</span>
                </div>
            </div>
            <div class="card-body">
                <!-- Event Details -->
                <div class="mb-3">
                    <p class="mb-2">
                        <i class="bi bi-calendar3 text-warning me-2"></i>
                        <strong>Date:</strong> Mar 15, 2024
                    </p>
                    <p class="mb-2">
                        <i class="bi bi-clock text-info me-2"></i>
                        <strong>Time:</strong> 6:00 PM
                    </p>
                    <p class="mb-3">
                        <i class="bi bi-geo-alt text-danger me-2"></i>
                        <strong>Venue:</strong> Chinnaswamy Stadium, Bangalore
                    </p>
                </div>
                
                <hr class="text-white-50">
                
                <!-- Seat Information -->
                <div class="mb-3">
                    <p class="mb-2">
                        <i class="bi bi-grid-3x3 text-success me-2"></i>
                        <strong>Seat:</strong> Block A, Row 5, Seat 12
                    </p>
                    <p class="mb-2">
                        <i class="bi bi-clock-history text-info me-2"></i>
                        <strong>Entry Slot:</strong> 5:15 PM - 5:45 PM
                    </p>
                    <p class="mb-3">
                        <i class="bi bi-door-open text-secondary me-2"></i>
                        <strong>Gate:</strong> Gate A4
                    </p>
                </div>
                
                <hr class="text-white-50">
                
                <!-- Price & Status -->
                <div class="row mb-3">
                    <div class="col-6">
                        <small class="text-muted">Ticket Price</small>
                        <p class="fw-bold text-success">₹1,500</p>
                    </div>
                    <div class="col-6">
                        <small class="text-muted">Category</small>
                        <p class="fw-bold text-info">Premium</p>
                    </div>
                </div>
                
                <!-- QR Code -->
                <div class="qr-code-section mb-3">
                    <div class="text-center">
                        <div style="width: 120px; height: 120px; background: linear-gradient(45deg, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%, #ddd),
                                                             linear-gradient(45deg, #ddd 25%, white 25%, white 75%, #ddd 75%, #ddd); 
                             background-size: 20px 20px; background-position: 0 0, 10px 10px; border-radius: 5px;"></div>
                        <p class="text-dark small mt-2 mb-0">Scan at Entry</p>
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div class="d-grid gap-2">
                    <a href="{% url 'entry_exit_plan' %}" class="btn btn-outline-light btn-sm">
                        <i class="bi bi-map me-2"></i>Plan My Journey
                    </a>
                    <button class="btn btn-outline-info btn-sm">
                        <i class="bi bi-download me-2"></i>Download Ticket
                    </button>
                    <button class="btn btn-outline-danger btn-sm">
                        <i class="bi bi-x-circle me-2"></i>Cancel Booking
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ticket 2 -->
    <div class="col-md-6 col-lg-4">
        <div class="card bg-dark text-white border-0 shadow-lg ticket-card upcoming">
            <div class="card-header bg-warning bg-opacity-25">
                <div class="d-flex justify-content-between align-items-center">
                    <h5 class="card-title mb-0 text-warning fw-bold">India vs Australia</h5>
                    <span class="badge bg-warning text-dark">Upcoming</span>
                </div>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <p class="mb-2">
                        <i class="bi bi-calendar3 text-warning me-2"></i>
                        <strong>Date:</strong> Mar 20, 2024
                    </p>
                    <p class="mb-2">
                        <i class="bi bi-clock text-info me-2"></i>
                        <strong>Time:</strong> 3:00 PM
                    </p>
                    <p class="mb-3">
                        <i class="bi bi-geo-alt text-danger me-2"></i>
                        <strong>Venue:</strong> Chinnaswamy Stadium, Bangalore
                    </p>
                </div>
                
                <hr class="text-white-50">
                
                <div class="mb-3">
                    <p class="mb-2">
                        <i class="bi bi-grid-3x3 text-success me-2"></i>
                        <strong>Seat:</strong> Block B, Row 8, Seats 15-16
                    </p>
                    <p class="mb-2">
                        <i class="bi bi-clock-history text-info me-2"></i>
                        <strong>Entry Slot:</strong> 2:00 PM - 2:30 PM
                    </p>
                    <p class="mb-3">
                        <i class="bi bi-door-open text-secondary me-2"></i>
                        <strong>Gate:</strong> Gate B2
                    </p>
                </div>
                
                <hr class="text-white-50">
                
                <div class="row mb-3">
                    <div class="col-6">
                        <small class="text-muted">Ticket Price</small>
                        <p class="fw-bold text-success">₹2,000</p>
                    </div>
                    <div class="col-6">
                        <small class="text-muted">Category</small>
                        <p class="fw-bold text-info">Premium</p>
                    </div>
                </div>
                
                <div class="qr-code-section mb-3">
                    <div class="text-center">
                        <div style="width: 120px; height: 120px; background: linear-gradient(45deg, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%, #ddd),
                                                             linear-gradient(45deg, #ddd 25%, white 25%, white 75%, #ddd 75%, #ddd); 
                             background-size: 20px 20px; background-position: 0 0, 10px 10px; border-radius: 5px;"></div>
                        <p class="text-dark small mt-2 mb-0">Scan at Entry</p>
                    </div>
                </div>
                
                <div class="d-grid gap-2">
                    <a href="{% url 'entry_exit_plan' %}" class="btn btn-outline-light btn-sm">
                        <i class="bi bi-map me-2"></i>Plan My Journey
                    </a>
                    <button class="btn btn-outline-info btn-sm">
                        <i class="bi bi-download me-2"></i>Download Ticket
                    </button>
                    <button class="btn btn-outline-danger btn-sm">
                        <i class="bi bi-x-circle me-2"></i>Cancel Booking
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ticket 3 -->
    <div class="col-md-6 col-lg-4">
        <div class="card bg-dark text-white border-0 shadow-lg ticket-card upcoming">
            <div class="card-header bg-warning bg-opacity-25">
                <div class="d-flex justify-content-between align-items-center">
                    <h5 class="card-title mb-0 text-warning fw-bold">India vs Sri Lanka</h5>
                    <span class="badge bg-warning text-dark">Upcoming</span>
                </div>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <p class="mb-2">
                        <i class="bi bi-calendar3 text-warning me-2"></i>
                        <strong>Date:</strong> Apr 5, 2024
                    </p>
                    <p class="mb-2">
                        <i class="bi bi-clock text-info me-2"></i>
                        <strong>Time:</strong> 6:00 PM
                    </p>
                    <p class="mb-3">
                        <i class="bi bi-geo-alt text-danger me-2"></i>
                        <strong>Venue:</strong> Chinnaswamy Stadium, Bangalore
                    </p>
                </div>
                
                <hr class="text-white-50">
                
                <div class="mb-3">
                    <p class="mb-2">
                        <i class="bi bi-grid-3x3 text-success me-2"></i>
                        <strong>Seat:</strong> Block C, Row 3, Seat 22
                    </p>
                    <p class="mb-2">
                        <i class="bi bi-clock-history text-info me-2"></i>
                        <strong>Entry Slot:</strong> 5:30 PM - 6:00 PM
                    </p>
                    <p class="mb-3">
                        <i class="bi bi-door-open text-secondary me-2"></i>
                        <strong>Gate:</strong> Gate C3
                    </p>
                </div>
                
                <hr class="text-white-50">
                
                <div class="row mb-3">
                    <div class="col-6">
                        <small class="text-muted">Ticket Price</small>
                        <p class="fw-bold text-success">₹800</p>
                    </div>
                    <div class="col-6">
                        <small class="text-muted">Category</small>
                        <p class="fw-bold text-info">Standard</p>
                    </div>
                </div>
                
                <div class="qr-code-section mb-3">
                    <div class="text-center">
                        <div style="width: 120px; height: 120px; background: linear-gradient(45deg, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%, #ddd),
                                                             linear-gradient(45deg, #ddd 25%, white 25%, white 75%, #ddd 75%, #ddd); 
                             background-size: 20px 20px; background-position: 0 0, 10px 10px; border-radius: 5px;"></div>
                        <p class="text-dark small mt-2 mb-0">Scan at Entry</p>
                    </div>
                </div>
                
                <div class="d-grid gap-2">
                    <a href="{% url 'entry_exit_plan' %}" class="btn btn-outline-light btn-sm">
                        <i class="bi bi-map me-2"></i>Plan My Journey
                    </a>
                    <button class="btn btn-outline-info btn-sm">
                        <i class="bi bi-download me-2"></i>Download Ticket
                    </button>
                    <button class="btn btn-outline-danger btn-sm">
                        <i class="bi bi-x-circle me-2"></i>Cancel Booking
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Used/Past Tickets Section -->
<h3 class="text-muted fw-bold mb-4">
    <i class="bi bi-check-circle me-2"></i>Used Events (4)
</h3>

<div class="row g-4 mb-5">
    <!-- Used Ticket 1 -->
    <div class="col-md-6 col-lg-4">
        <div class="card bg-dark text-white border-0 shadow-lg ticket-card used opacity-75">
            <div class="card-header bg-secondary bg-opacity-50">
                <div class="d-flex justify-content-between align-items-center">
                    <h5 class="card-title mb-0 text-muted fw-bold">India vs England</h5>
                    <span class="badge bg-secondary">Used</span>
                </div>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <p class="mb-2">
                        <i class="bi bi-calendar3 text-secondary me-2"></i>
                        <strong>Date:</strong> Feb 18, 2024
                    </p>
                    <p class="mb-3">
                        <i class="bi bi-grid-3x3 text-secondary me-2"></i>
                        <strong>Seat:</strong> Block D, Row 10, Seat 5
                    </p>
                </div>
                
                <div class="row">
                    <div class="col-6">
                        <small class="text-muted">Ticket Price</small>
                        <p class="fw-bold text-secondary">₹1,200</p>
                    </div>
                    <div class="col-6">
                        <small class="text-muted">Used On</small>
                        <p class="fw-bold text-secondary">Feb 18</p>
                    </div>
                </div>
                
                <div class="mt-3 p-2 bg-secondary bg-opacity-25 rounded text-center">
                    <small class="text-muted">✓ Entry Completed</small>
                </div>
            </div>
        </div>
    </div>

    <!-- Used Ticket 2 -->
    <div class="col-md-6 col-lg-4">
        <div class="card bg-dark text-white border-0 shadow-lg ticket-card used opacity-75">
            <div class="card-header bg-secondary bg-opacity-50">
                <div class="d-flex justify-content-between align-items-center">
                    <h5 class="card-title mb-0 text-muted fw-bold">India vs West Indies</h5>
                    <span class="badge bg-secondary">Used</span>
                </div>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <p class="mb-2">
                        <i class="bi bi-calendar3 text-secondary me-2"></i>
                        <strong>Date:</strong> Feb 10, 2024
                    </p>
                    <p class="mb-3">
                        <i class="bi bi-grid-3x3 text-secondary me-2"></i>
                        <strong>Seat:</strong> Block A, Row 2, Seats 30-31
                    </p>
                </div>
                
                <div class="row">
                    <div class="col-6">
                        <small class="text-muted">Ticket Price</small>
                        <p class="fw-bold text-secondary">₹1,600</p>
                    </div>
                    <div class="col-6">
                        <small class="text-muted">Used On</small>
                        <p class="fw-bold text-secondary">Feb 10</p>
                    </div>
                </div>
                
                <div class="mt-3 p-2 bg-secondary bg-opacity-25 rounded text-center">
                    <small class="text-muted">✓ Entry Completed</small>
                </div>
            </div>
        </div>
    </div>

    <!-- Used Ticket 3 -->
    <div class="col-md-6 col-lg-4">
        <div class="card bg-dark text-white border-0 shadow-lg ticket-card used opacity-75">
            <div class="card-header bg-secondary bg-opacity-50">
                <div class="d-flex justify-content-between align-items-center">
                    <h5 class="card-title mb-0 text-muted fw-bold">India vs South Africa</h5>
                    <span class="badge bg-secondary">Used</span>
                </div>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <p class="mb-2">
                        <i class="bi bi-calendar3 text-secondary me-2"></i>
                        <strong>Date:</strong> Jan 28, 2024
                    </p>
                    <p class="mb-3">
                        <i class="bi bi-grid-3x3 text-secondary me-2"></i>
                        <strong>Seat:</strong> Block E, Row 6, Seat 18
                    </p>
                </div>
                
                <div class="row">
                    <div class="col-6">
                        <small class="text-muted">Ticket Price</small>
                        <p class="fw-bold text-secondary">₹950</p>
                    </div>
                    <div class="col-6">
                        <small class="text-muted">Used On</small>
                        <p class="fw-bold text-secondary">Jan 28</p>
                    </div>
                </div>
                
                <div class="mt-3 p-2 bg-secondary bg-opacity-25 rounded text-center">
                    <small class="text-muted">✓ Entry Completed</small>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Booking Analytics -->
<section class="bg-dark rounded-3 p-4 mb-4">
    <h3 class="fw-bold text-success mb-4">
        <i class="bi bi-graph-up me-2"></i>Your Booking Analytics
    </h3>
    
    <div class="row g-4">
        <div class="col-md-6">
            <h5 class="text-white mb-3">Spending by Category</h5>
            <div class="row g-2">
                <div class="col-md-6">
                    <div class="p-3 bg-secondary rounded text-center">
                        <p class="mb-1 text-muted small">Budget Tickets</p>
                        <p class="fs-5 fw-bold text-info">₹2,400 (13%)</p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="p-3 bg-secondary rounded text-center">
                        <p class="mb-1 text-muted small">Standard Tickets</p>
                        <p class="fs-5 fw-bold text-success">₹6,800 (37%)</p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="p-3 bg-secondary rounded text-center">
                        <p class="mb-1 text-muted small">Premium Tickets</p>
                        <p class="fs-5 fw-bold text-warning">₹7,500 (41%)</p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="p-3 bg-secondary rounded text-center">
                        <p class="mb-1 text-muted small">Luxury Tickets</p>
                        <p class="fs-5 fw-bold text-danger">₹1,800 (9%)</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-md-6">
            <h5 class="text-white mb-3">Booking History</h5>
            <div class="timeline-item">
                <div class="d-flex justify-content-between">
                    <strong class="text-success">India vs Pakistan</strong>
                    <span class="timeline-status bg-success bg-opacity-25 text-success">Booked</span>
                </div>
                <small class="text-muted">5 days ago • Mar 15, 2024 • ₹1,500</small>
            </div>
            <div class="timeline-item">
                <div class="d-flex justify-content-between">
                    <strong class="text-warning">India vs Australia</strong>
                    <span class="timeline-status bg-warning bg-opacity-25 text-warning">Booked</span>
                </div>
                <small class="text-muted">2 weeks ago • Mar 20, 2024 • ₹2,000</small>
            </div>
            <div class="timeline-item">
                <div class="d-flex justify-content-between">
                    <strong class="text-info">India vs England</strong>
                    <span class="timeline-status bg-info bg-opacity-25 text-info">Used</span>
                </div>
                <small class="text-muted">1 month ago • Feb 18, 2024 • ₹1,200</small>
            </div>
        </div>
    </div>
</section>

<!-- Call to Action -->
<div class="alert alert-info">
    <div class="row align-items-center">
        <div class="col-md-8">
            <h5 class="alert-heading">
                <i class="bi bi-lightning-charge me-2"></i>Need More Tickets?
            </h5>
            <p class="mb-0">Browse our complete list of upcoming matches and secure your spot at the stadium!</p>
        </div>
        <div class="col-md-4 text-md-end">
            <a href="{% url 'events_list' %}" class="btn btn-info">
                <i class="bi bi-calendar-event me-2"></i>Browse Events
            </a>
        </div>
    </div>
</div>

{% endblock %}
